# Prompt for AI Studio: MedGemma Impact Challenge Application Generator

**Role:** You are an expert Full-Stack Software Engineer, UI/UX Designer, and AI Architect specializing in healthcare applications.

**Objective:** Build a functional, high-fidelity prototype of a "Clinician-in-the-loop SOAP Copilot" for the MedGemma Impact Challenge. This application must use Google's MedGemma/HAI-DEF models (or placeholders effectively simulating them) and adhere to a specific "Circular SOAP Hub" UI design.

---

## 1. Competition Context & Constraints
*   **Event:** MedGemma Impact Challenge (Kaggle Hackathon).
*   **Goal:** Build a human-centered healthcare demo using MedGemma.
*   **Judging Criteria:**
    *   **Effective use of HAI‑DEF models (20%):** Must use MedGemma for reasoning/generation.
    *   **Problem domain (15%):** Addressing documentation burden and evidence-based reasoning.
    *   **Product feasibility (20%):** Technical stack, performance.
    *   **Execution (30%):** Polished UI/UX.
*   **Key Constraint:** No provided dataset. We use synthetic/public data.

---

## 2. Product Concept: "Clinician-in-the-loop SOAP Copilot"
**Core Value:** An agentic copilot that helps clinicians document and reason in real-time. It does NOT replace the doctor but acts as a "phase-gated" assistant that moves through the clinical workflow:
**Subjective (S) → Objective (O) → Assessment (A) → Plan (P) → Results**.

**Key Features:**
*   **Chat-First:** Intake via typed notes or transcribed audio.
*   **Phase-Gating:** The user must complete specific checks (missing info) before advancing from 'S' to 'O', etc.
*   **Evidence Retrieval:** In the 'Assessment' phase, the system actively retrieves medical guidelines/papers to ground its suggestions (RAG).
*   **Cyclical:** New results (labs/imaging) can loop the process back to Assessment or Plan.

---

## 3. UI/UX Design: "Circular SOAP Hub"
**Visual Metaphor:** The patient is the "Hub" (Center), surrounded by "Satellites" (Chats/Tools).

### A. Center: The Patient Hub (Interactive Visualization)
A large central circle divided into 3 primary sectors, plus a Results ring.
1.  **S/O Sector (Top):** Combines Subjective & Objective inputs.
2.  **A Sector (Bottom-Right):** Assessment (reasoning).
3.  **P Sector (Bottom-Left):** Plan (actions).
4.  **Results Ring:** A final outer ring or distinct node for outcomes.

**"Chips" (Mini-Circles):**
Floating around each sector are interactive "Chips" representing specific data points.
*   *S/O Chips:* Symptoms, Vitals, Lab values.
*   *Assessment Chips:* Differential diagnoses, Evidence citations.
*   *Plan Chips:* Meds ordered, Tests requested.
*   *Interaction:* Clicking a chip opens details or a focused thread in the chat.

### B. Right Panel: The Chat Interface
A persistent side panel with 5 specific modes (tabs/toggle):
1.  **Full Context:** General orchestration.
2.  **S/O Chat:** Fact-gathering (asks missing info questions).
3.  **Assessment Chat:** Evidence-based reasoning (displays retrieved snippets).
4.  **Plan Chat:** Action drafting.
5.  **Results Chat:** Outcome logging.

**Interaction Flow:**
*   Clicking a **Sector** in the Hub switches the **Chat Mode**.
*   The Hub animates to highlight the active phase.

---

## 4. Workflow Logic (The "Agentic" Behavior)
Implement the following state machine logic:

1.  **Phase 1: S (Subjective)**
    *   *Input:* Chat text/Transcripts.
    *   *Agent Task:* Extract HPI, Symptoms. Identify "Missing Information" (e.g., "Ask about fever duration").
    *   *Output:* Create 'S' Chips.
2.  **Phase 2: O (Objective)**
    *   *Input:* Uploaded artifacts (images of lab results, EKGs) or text data.
    *   *Agent Task:* Extract values/trends.
    *   *Output:* Create 'O' Chips.
3.  **Phase 3: A (Assessment) - CRITICAL**
    *   *Agent Task:* Generate differential diagnosis.
    *   *Retrieval:* Automatically query a mock medical knowledge base. Show "Evidence Cards" linked to specific diagnoses.
    *   *Gate:* User must confirm Assessment before moving to Plan.
4.  **Phase 4: P (Plan)**
    *   *Agent Task:* Draft orders/prescriptions based on Assessment.
    *   *Output:* Plan Chips with status (Draft/Ordered).
5.  **Phase 5: Results/Loop**
    *   *Agent Task:* Log outcomes. If a result is unexpected, prompt user to return to Phase A.

---

## 5. Technical Implementation Requirements
*   **Frontend:** Modern web framework (React, Vue, or Next.js).
    *   *Visualization:* Use D3.js, Recharts, or CSS animations for the "Circular Hub".
    *   *Styling:* Clean, medical-grade aesthetic (whites, blues, teals). Dark mode option.
*   **Backend:** Python (FastAPI/Flask).
    *   *LLM Integration:* Interface with Google Gemini API (representing MedGemma).
    *   *RAG Pipeline:* Simple vector search or keyword search for medical guidelines.
*   **Data Structure:** JSON object representing the "Patient State" that updates live (e.g., `{ "subjective": [...], "assessment": [...] }`).

## 6. Your Task
Generate the code for this application. Start with the **Frontend structure** (HTML/CSS/JS or React components) to visualize the Circular Hub, then provide the **Backend logic** to handle the state transitions and simulated MedGemma responses.
